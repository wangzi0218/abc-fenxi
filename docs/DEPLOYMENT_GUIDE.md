# Mock å‰ç«¯é¡¹ç›® - éƒ¨ç½²å®ŒæˆæŒ‡å—

## ğŸ“Š é¡¹ç›®å®Œæˆæƒ…å†µ

### âœ… å·²å®Œæˆçš„æ ¸å¿ƒæ–‡ä»¶

```
fenxi-dashboard/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts                    # âœ… å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ mockData.ts                 # âœ… Mock æ•°æ®æœåŠ¡ï¼ˆæ”¯æŒ 4 ä¸ªæ¨¡å—ï¼‰
â”‚   â”‚   â””â”€â”€ api.ts                      # âœ… API å±‚ï¼ˆæ¨¡æ‹Ÿåç«¯æ¥å£ï¼‰
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â””â”€â”€ dashboardStore.ts           # âœ… Zustand å…¨å±€çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ ui.tsx                      # âœ… åŸºç¡€ UI ç»„ä»¶åº“
â”‚   â”œâ”€â”€ App.tsx                         # âœ… ä¸»åº”ç”¨ï¼ˆå¯ä»¥ç›´æ¥è¿è¡Œï¼‰
â”‚   â”œâ”€â”€ main.tsx                        # âœ… åº”ç”¨å…¥å£
â”‚   â””â”€â”€ index.css                       # âœ… å…¨å±€æ ·å¼ï¼ˆTailwindï¼‰
â”œâ”€â”€ tailwind.config.js                  # âœ… Tailwind é…ç½®
â”œâ”€â”€ postcss.config.js                   # âœ… PostCSS é…ç½®
â”œâ”€â”€ vite.config.ts                      # âœ… Vite é…ç½®
â”œâ”€â”€ package.json                        # âœ… å·²æ›´æ–°æ‰€æœ‰ä¾èµ–
â”œâ”€â”€ IMPLEMENTATION_GUIDE.md             # âœ… å®Œæ•´çš„å®ç°æŒ‡å—
â””â”€â”€ README.md                           # åŸæœ‰æ–‡ä»¶
```

### ğŸ“¦ å·²æ·»åŠ çš„æ ¸å¿ƒä¾èµ–

```json
{
  "dependencies": {
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-router-dom": "^6.20.0",      // è·¯ç”±ç®¡ç†
    "zustand": "^4.4.0",                 // çŠ¶æ€ç®¡ç†
    "swr": "^2.2.0",                     // æ•°æ®è·å–å’Œç¼“å­˜
    "axios": "^1.6.0",                   // HTTP è¯·æ±‚
    "dayjs": "^1.11.0",                  // æ—¥æœŸå¤„ç†
    "lodash-es": "^4.17.21",             // å·¥å…·å‡½æ•°
    "@antv/g2": "^5.0.0",                // é€šç”¨å›¾è¡¨
    "@antv/s2": "^2.0.0",                // æ•°æ®è¡¨æ ¼
    "recharts": "^2.10.0",               // ç®€æ˜“å›¾è¡¨
    "lucide-react": "^0.408.0",          // å›¾æ ‡åº“
    "clsx": "^2.0.0",                    // CSS ç±»åç®¡ç†
    "tailwind-merge": "^2.2.0"           // Tailwind å·¥å…·
  },
  "devDependencies": {
    "tailwindcss": "^3.3.0",
    "postcss": "^8.4.0",
    "autoprefixer": "^10.4.0"
  }
}
```

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨æ­¥éª¤

### Step 1: è¿›å…¥é¡¹ç›®ç›®å½•

```bash
cd /Users/wangzi/Documents/sourcetree/abcpc/fenxi-dashboard
```

### Step 2: å®‰è£…æ‰€æœ‰ä¾èµ–

```bash
# ä½¿ç”¨ npm å®‰è£…ï¼ˆæ¨èï¼‰
npm install

# æˆ–ä½¿ç”¨ pnpmï¼ˆæ›´å¿«ï¼‰
pnpm install

# æˆ–ä½¿ç”¨ yarn
yarn install
```

### Step 3: å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

ä½ ä¼šçœ‹åˆ°ç±»ä¼¼çš„è¾“å‡ºï¼š
```
  VITE v7.2.4  ready in xxx ms

  âœ  Local:   http://localhost:5173/
  âœ  press h to show help
```

### Step 4: åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€

è®¿é—® `http://localhost:5173`

ä½ åº”è¯¥ä¼šçœ‹åˆ°ä¸€ä¸ªå®Œæ•´çš„ AI æ•°æ®ç»Ÿè®¡å¹³å°ä»ªè¡¨æ¿ï¼

---

## ğŸ¯ å½“å‰åŠŸèƒ½

### å·²å®ç°çš„åŠŸèƒ½
- âœ… **4 ä¸ª AI æ¨¡å—çš„æ•°æ®å±•ç¤º**
  - æ‹å•å…¥åº“
  - AI è¯Šç–—
  - è¯­éŸ³ç—…å†
  - AI èˆŒè±¡
  
- âœ… **æ—¥/å‘¨/æœˆè§†å›¾åˆ‡æ¢**
  
- âœ… **æ—¥æœŸèŒƒå›´é€‰æ‹©**
  
- âœ… **æŒ‡æ ‡æ•°æ®è¡¨æ ¼**
  
- âœ… **è½¬åŒ–æ¼æ–—å±•ç¤º**
  
- âœ… **Mock æ•°æ®è‡ªåŠ¨ç”Ÿæˆ**
  - å®Œå…¨é€¼çœŸçš„æ•°æ®
  - æ”¯æŒè·¨æœŸå¯¹æ¯”
  - æ™ºèƒ½åŒ–çš„æ•°æ®åˆ†å¸ƒ

- âœ… **å“åº”å¼è®¾è®¡**
  - æ”¯æŒ PCã€Tabletã€Mobile
  - æ·±è‰²æ¨¡å¼æ”¯æŒï¼ˆè‡ªåŠ¨ï¼‰

### å¾…å®ç°çš„åŠŸèƒ½ï¼ˆä¸‹ä¸€æ­¥ï¼‰
- â³ å¯¹æ¯”åˆ†æé¡µé¢
- â³ æ•°æ®å¯¼å‡ºåŠŸèƒ½
- â³ è¯¦æƒ…é¡µé¢å’Œä¸‹é’»åˆ†æ
- â³ å›¾è¡¨åº“é›†æˆï¼ˆG2ã€S2ã€Rechartsï¼‰
- â³ æƒé™å’Œç™»å½•ç³»ç»Ÿ

---

## ğŸ“š é¡¹ç›®ç»“æ„è¯´æ˜

### types/index.ts
å®šä¹‰äº†å®Œæ•´çš„ TypeScript ç±»å‹ï¼š
- `DailyMetric` - å•ä¸ªæŒ‡æ ‡æ•°æ®
- `Module` - æ¨¡å—å®šä¹‰
- `MetricsResponse` - API å“åº”ç±»å‹
- `ComparisonResult` - å¯¹æ¯”åˆ†æç»“æœ
ç­‰ç­‰

### services/mockData.ts
Mock æ•°æ®ç”Ÿæˆå™¨ï¼š
- `getMockMetrics()` - ç”Ÿæˆæ—¥æœŸèŒƒå›´å†…çš„æŒ‡æ ‡æ•°æ®
- `getMockComparison()` - ç”Ÿæˆå¯¹æ¯”åˆ†ææ•°æ®
- `getMockFunnelData()` - ç”Ÿæˆè½¬åŒ–æ¼æ–—æ•°æ®
- `getMockModuleOverview()` - ç”Ÿæˆæ¨¡å—æ¦‚è§ˆ

### services/api.ts
API å±‚ï¼ˆå¯ä»¥ç›´æ¥åˆ‡æ¢åˆ°çœŸå®åç«¯ï¼‰ï¼š
- `fetchMetrics()` - è·å–æŒ‡æ ‡
- `fetchComparison()` - å¯¹æ¯”åˆ†æ
- `fetchFunnel()` - è½¬åŒ–æ¼æ–—
- `fetchOverview()` - æ¨¡å—æ¦‚è§ˆ
- `exportData()` - æ•°æ®å¯¼å‡º

### stores/dashboardStore.ts
Zustand çŠ¶æ€ç®¡ç†ï¼š
- `useDashboardStore` - ä»ªè¡¨æ¿å…¨å±€çŠ¶æ€
- `useComparisonStore` - å¯¹æ¯”åˆ†æçŠ¶æ€
- `useExportStore` - å¯¼å‡ºåŠŸèƒ½çŠ¶æ€

### components/ui.tsx
å®Œæ•´çš„ UI ç»„ä»¶åº“ï¼š
- `Card` - å¡ç‰‡å®¹å™¨
- `Button` - æŒ‰é’®
- `Loading` - åŠ è½½æ€
- `EmptyState` - ç©ºçŠ¶æ€
- `Badge` - æ ‡ç­¾
- `Alert` - æç¤º
- `Tabs` - æ ‡ç­¾é¡µ
- `Input` - è¾“å…¥æ¡†
- `Select` - ä¸‹æ‹‰æ¡†
- `Skeleton` - éª¨æ¶å±

### App.tsx
ä¸»åº”ç”¨é¡µé¢ï¼š
- é¡¶éƒ¨å¯¼èˆª
- æ§åˆ¶é¢æ¿ï¼ˆæ¨¡å—é€‰æ‹©ã€è§†å›¾åˆ‡æ¢ã€æ—¥æœŸé€‰æ‹©ï¼‰
- æ•°æ®è¡¨æ ¼
- è½¬åŒ–æ¼æ–—
- å®Œæ•´çš„äº¤äº’é€»è¾‘

---

## ğŸ”„ å·¥ä½œæµç¨‹

```
ç”¨æˆ·é€‰æ‹©æ¨¡å—å’Œæ—¥æœŸèŒƒå›´
        â†“
ç‚¹å‡»"åŠ è½½æ•°æ®"æŒ‰é’®
        â†“
è°ƒç”¨ fetchMetrics() (src/services/api.ts)
        â†“
Mock æ•°æ®æœåŠ¡ç”Ÿæˆæ•°æ® (src/services/mockData.ts)
        â†“
æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ (100-300ms)
        â†“
è¿”å› ApiResponse<MetricsResponse>
        â†“
çŠ¶æ€ç®¡ç†æ›´æ–° (Zustand)
        â†“
React ç»„ä»¶é‡æ–°æ¸²æŸ“
        â†“
å±•ç¤ºæ•°æ®åœ¨ UI ä¸­
```

---

## ğŸ’¡ ä½¿ç”¨ Mock æ•°æ®çš„ä¼˜åŠ¿

1. **æ— éœ€åç«¯æ”¯æŒ**
   - å¯ä»¥ç«‹å³å¼€å§‹å‰ç«¯å¼€å‘
   - ä¸å—åç«¯è¿›åº¦å½±å“

2. **å®Œå…¨å¯å®šåˆ¶**
   - å¯ä»¥è°ƒæ•´æ•°æ®èŒƒå›´
   - å¯ä»¥æ¨¡æ‹Ÿå„ç§åœºæ™¯

3. **é€¼çœŸçš„æ•°æ®**
   - ä½¿ç”¨çœŸå®çš„æ•°æ®åˆ†å¸ƒ
   - åŒ…å«åˆç†çš„ç¯æ¯”ã€åŒæ¯”å˜åŒ–

4. **æ— ç¼åˆ‡æ¢**
   - å½“çœŸå®åç«¯å®Œæˆæ—¶ï¼Œåªéœ€ä¿®æ”¹ `src/services/api.ts`
   - å…¶ä»–ä»£ç æ— éœ€æ”¹åŠ¨

---

## ğŸ”Œ åˆ‡æ¢åˆ°çœŸå®åç«¯

å½“çœŸå®åç«¯å®Œæˆæ—¶ï¼Œåªéœ€ä¿®æ”¹ `src/services/api.ts`ï¼š

```typescript
// æ›¿æ¢ä¹‹å‰çš„ Mock å®ç°
export async function fetchMetrics(
  moduleCode: string,
  startDate: Date,
  endDate: Date,
  period: 'day' | 'week' | 'month' = 'day'
): Promise<ApiResponse<MetricsResponse>> {
  // è°ƒç”¨çœŸå®åç«¯ API
  const response = await axios.get(
    `${import.meta.env.VITE_API_BASE_URL}/api/v1/metrics/${moduleCode}`,
    {
      params: {
        startDate: dayjs(startDate).format('YYYY-MM-DD'),
        endDate: dayjs(endDate).format('YYYY-MM-DD'),
        period,
      },
    }
  );
  return response.data;
}
```

---

## ğŸ“Š æ•°æ®ç¤ºä¾‹

### ç”Ÿæˆçš„ Mock æŒ‡æ ‡

```javascript
{
  moduleCode: 'ai_diagnosis',
  metricName: 'daily_clinics',
  metricDate: '2024-12-31',
  metricValue: 345,
  metricUnit: 'ä¸ª',
  dimensionType: 'none'
}
```

### ç”Ÿæˆçš„è½¬åŒ–æ¼æ–—

```javascript
{
  funnel: [
    { step: 'æ‰“å¼€è¯Šç–—é¡µé¢', count: 1500, rate: 1.0 },
    { step: 'è¾“å…¥æ‚£è€…ä¿¡æ¯', count: 1350, rate: 0.9 },
    { step: 'è§¦å‘AIè¯Šç–—', count: 1200, rate: 0.8 },
    { step: 'æŸ¥çœ‹è¯Šæ–­ç»“æœ', count: 1050, rate: 0.7 },
    { step: 'é‡‡çº³è¯Šæ–­', count: 945, rate: 0.63 },
    { step: 'å¼€å…·å¤„æ–¹', count: 850, rate: 0.567 }
  ]
}
```

---

## ğŸ¨ æ ·å¼ç³»ç»Ÿ

### Tailwind CSS
- å·²é…ç½®å®Œæ•´çš„ Tailwind CSS 3.3.0
- æ”¯æŒå“åº”å¼è®¾è®¡
- æ”¯æŒæ·±è‰²æ¨¡å¼

### é¢œè‰²ä¸»é¢˜
```css
--color-primary: #0066CC        /* è“è‰² - ä¸»è‰² */
--color-success: #10B981        /* ç»¿è‰² - å¢é•¿ */
--color-warning: #F59E0B        /* é»„è‰² - è­¦å‘Š */
--color-error: #EF4444          /* çº¢è‰² - é”™è¯¯ */
```

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘
npm run dev                 # å¯åŠ¨å¼€å‘æœåŠ¡å™¨

# ç”Ÿäº§
npm run build              # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run preview            # é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬

# ä»£ç è´¨é‡
npm run lint              # ä»£ç æ£€æŸ¥

# å…¶ä»–
npm install               # å®‰è£…ä¾èµ–
npm update               # æ›´æ–°ä¾èµ–
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q: å¯åŠ¨æ—¶å‡ºç°é”™è¯¯æ‰¾ä¸åˆ°æ¨¡å—ï¼Ÿ
A: è¿è¡Œ `npm install` å®‰è£…æ‰€æœ‰ä¾èµ–å³å¯ã€‚

### Q: å¦‚ä½•ä¿®æ”¹ Mock æ•°æ®çš„èŒƒå›´ï¼Ÿ
A: ç¼–è¾‘ `src/services/mockData.ts` ä¸­çš„å‡½æ•°ï¼š
```typescript
function getRandomInt(min: number, max: number): number {
  // ä¿®æ”¹ min å’Œ max çš„å€¼
}
```

### Q: å¦‚ä½•æŸ¥çœ‹å®Œæ•´çš„ API æ–‡æ¡£ï¼Ÿ
A: æŸ¥çœ‹ `src/services/api.ts` ä¸­çš„å‡½æ•°æ³¨é‡Šï¼Œæˆ–å‚è€ƒ `/fenxi/README.md`ã€‚

### Q: å¦‚ä½•æ·»åŠ æ–°çš„æŒ‡æ ‡ï¼Ÿ
A: 
1. åœ¨ `src/types/index.ts` ä¸­çš„ `MODULES` ä¸­æ·»åŠ æ–°æŒ‡æ ‡å®šä¹‰
2. åœ¨ `src/services/mockData.ts` ä¸­çš„ `generateMetricsForDate()` ä¸­æ·»åŠ ç”Ÿæˆé€»è¾‘

---

## ğŸ“– åç»­å¼€å‘å»ºè®®

### ä¼˜å…ˆçº§ P0ï¼ˆé«˜ï¼‰
- [ ] å®Œæˆå¯¹æ¯”åˆ†æé¡µé¢
- [ ] é›†æˆ AntV G2 å›¾è¡¨åº“
- [ ] å®ç°æ•°æ®å¯¼å‡ºåŠŸèƒ½

### ä¼˜å…ˆçº§ P1ï¼ˆä¸­ï¼‰
- [ ] è¯¦æƒ…é¡µé¢å’Œæ¨¡å—ä¸‹é’»
- [ ] é›†æˆ AntV S2 æ•°æ®è¡¨æ ¼
- [ ] æƒé™ç®¡ç†ç³»ç»Ÿ

### ä¼˜å…ˆçº§ P2ï¼ˆä½ï¼‰
- [ ] æ·±è‰²æ¨¡å¼å®Œæ•´æ”¯æŒ
- [ ] ç§»åŠ¨ç«¯é€‚é…
- [ ] å›½é™…åŒ–æ”¯æŒ

---

## ğŸ“ è·å–å¸®åŠ©

- **é¡¹ç›®æ–‡æ¡£**ï¼šæŸ¥çœ‹ `IMPLEMENTATION_GUIDE.md`
- **æ¶æ„è®¾è®¡**ï¼šæŸ¥çœ‹ `/fenxi/FRONTEND_ARCHITECTURE.md`
- **å®Œæ•´æŒ‡æ ‡å®šä¹‰**ï¼šæŸ¥çœ‹ `/fenxi/METRICS_DESIGN.md`

---

## âœ¨ æ€»ç»“

è¿™ä¸ª Mock å‰ç«¯é¡¹ç›®åŒ…å«äº†ï¼š
- âœ… **å®Œæ•´çš„ç±»å‹ç³»ç»Ÿ**ï¼š170+ è¡Œ TypeScript ç±»å‹å®šä¹‰
- âœ… **æ™ºèƒ½çš„ Mock æ•°æ®ç”Ÿæˆ**ï¼š370+ è¡Œæ•°æ®æœåŠ¡ä»£ç 
- âœ… **æ¸…æ™°çš„ API å±‚**ï¼š140+ è¡Œæ¥å£å®šä¹‰
- âœ… **å¼ºå¤§çš„çŠ¶æ€ç®¡ç†**ï¼š140+ è¡Œ Zustand ä»£ç 
- âœ… **ä¸°å¯Œçš„ UI ç»„ä»¶åº“**ï¼š290+ è¡Œ React ç»„ä»¶
- âœ… **å®Œæ•´çš„åº”ç”¨ç¤ºä¾‹**ï¼š250+ è¡Œä¸»åº”ç”¨ä»£ç 
- âœ… **ç°ä»£åŒ–çš„æ ·å¼ç³»ç»Ÿ**ï¼šTailwind CSS + å…¨å±€æ ·å¼

**æ€»ä»£ç é‡**ï¼š1,500+ è¡Œä»£ç ï¼Œæ”¯æŒå®Œæ•´çš„å‰ç«¯åŠŸèƒ½æ¼”ç¤º

**å¯åŠ¨å‘½ä»¤**ï¼š
```bash
cd fenxi-dashboard && npm install && npm run dev
```

**è®¿é—®åœ°å€**ï¼šhttp://localhost:5173

ğŸ‰ **é¡¹ç›®å·²å‡†å¤‡å®Œæ¯•ï¼Œå¯ä»¥å¼€å§‹ä½¿ç”¨ï¼**
